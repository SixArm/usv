# よくある質問


## USVは簡単ですか？

はい。
カンマ区切り値 (CSV)、タブ区切り値 (TSV)、ASCII区切り値 (ASV) をご存知なら、
USVのこともほとんど理解できます。


## USVXは簡単ですか？

はい。USVXは、USVに空白文字のトリム、バックスペースのエスケープ、最後の改行などの拡張機能を加えたものです。


## USV/USVXは標準ですか？

その予定です。できる限り早期の標準化を目指しています。

USVとUSVXは、
<a href="https://www.iana.org/assignments/media-types/text/tab-separated-values">IANA TSV</a>
のような標準化を目指しています。

USVとUSVXは、いずれも Joel Parker Henderson
(joel@joelparkerhenderson.com) が中心になっています。

標準化に関する建設的なフィードバックは大歓迎です。


## CSVやTSVでなく、USV/USVXを選ぶメリットは？

データの内容にカンマ、タブ、改行などを含めることができます。

データグループ、データベースのテーブル、
スプレッドシートのグリッドをデータの内容に使用できます。

データファイル、データベーススキーマ、
スプレッドシートのフォリオを含むデータ形式として使用できます。

CSVが必ずしも提供できない、
一貫性と互換性を備えた標準的なフォーマットとして利用できます。

CSV/TSV/TDFでは必ずしも提供されない、
一貫性と互換性を備えた標準的なファイル名の拡張子を利用できます。


## ASVではなくUSV/USVXを選ぶメリットは？

データの中身を、人間が読んだり編集したりするのに適したものにすることができます。

USVでは文字幅を持った、
通常目に見える文字 (Unicode 241Fなど) を使用します。
一方、ASVではゼロ幅の、通常目に見えない文字 (ASCII 31など) を使用します。

ASV文字を、それに対応するUSVの目に見える文字やその他の視覚表現により示してくれるエディターがあることは事実ですが、
この方法がサポートされるエディターを実際に見かけることは、
あまりありません。


## 機械のみが使用するデータにASVではなくUSV/USVXを選ぶメリットは？

人間が読んだり編集したりすることのない、
機械のみが使用するデータの場合は、USVとASVのどちらもユニット、フィールド、グループ、ファイルなどが扱えるため、
ほぼ違いはありません。


## USV/USVXでは特殊文字のエスケープが利用できますか？

USVでは利用できません。USVXではバックスラッシュを用いた典型的なエスケープにより、任意のUSV文字を保護することができます。

これはUSVをより使いやすく、より高速にパースし、
より明瞭に標準化するための意図的な設計上の決断です。

文字のエスケープについて調べたところ、
エスケープは一部のニーズを解決する一方で、別のニーズに困難を生じさせることがわかりました。
現実の英語のテキストではカンマが頻繁に使われるため、CSVのエスケープは非常に重要なものと考えられます。
CSVのエスケープ処理は、CSVの実装間で一貫性がないことがわかりました。


## USVXは利用しないものの、特殊文字のエスケープは必要、という場合はどうすればよいですか？

USVを使用しながら、特殊文字のエスケープを行う独自のコードを追加することができます。

JSON、XML、SQLなどの他のデータ形式を試してみるのもよいでしょう。

Unicodeのbackslash-uエンコーディング (例: ユニット区切りは "\u241F")、
Base64エンコーディング (例: ユニット区切りは "4pCf") など、
他の文字エンコーディングを利用することもできます。


## USV/USVXでは、空白文字の特殊な取り扱いができますか？

USVでは利用できません。USVXでは、任意のUSV文字の前後に任意の空白文字を配置することができます。

これはUSVをより使いやすく、より高速にパースし、
より明瞭に標準化するための意図的な設計上の決断です。

空白文字の処理いについて調べたところ、
そのような処理は一部のニーズを解決する一方で、別のニーズに困難を生じさせることがわかりました。
それを受けて、空白文字の処理は利便性を提供する場面があるものの、必ずしも必要なものではないため、USVの規格からは省くことになりました。
ただし、プロジェクトによっては空白文字の処理が非常に便利であるため、
USVXの規格に含めるという結論に至りました。


## USVXは利用しないものの、空白文字の特別な処理が必要、という場合はどうすればよいですか？

USVを使用しながら、空白文字の特別な処理を行う独自のコードを追加することができます。

シリアライザー、デシリアライザー、前フィルター、後フィルター、変換関数など、
他の種類の処理を試してみるのもよいでしょう。

`sed`、`awk`、`mlr` などのコマンドラインインタフェースツールや、
プログラミング言語で提供される `trim`、`strip`、`chomp`
などの関数やメソッドを使った空白文字の調整を検討するのもよいかもしれません。
